"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[777],{9777:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("el-container",[t("el-main",[t("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[t("span",{staticClass:"title"},[e._v("智慧校园服务平台")]),t("form",[t("div",{staticClass:"demo-input-suffix"},[t("el-input",{attrs:{placeholder:"请输入用户名(admin)"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}},[t("i",{staticClass:"el-input__icon el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})]),t("el-input",{attrs:{placeholder:"请输入密码(admin)","show-password":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[t("i",{staticClass:"el-input__icon el-icon-s-goods",attrs:{slot:"prefix"},slot:"prefix"})]),t("el-row",[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"请输入验证码(请选择管理员登录)"},model:{value:e.verifiCode,callback:function(t){e.verifiCode=t},expression:"verifiCode"}},[t("i",{staticClass:"el-input__icon el-icon-picture-outline",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-col",{attrs:{span:4}},[t("el-image",{staticStyle:{width:"100px",height:"55px"},attrs:{src:e.imgCodeUrl},on:{click:e.getCodeImg}})],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-radio",{attrs:{label:"1"},model:{value:e.userType,callback:function(t){e.userType=t},expression:"userType"}},[e._v("管理员")])],1),t("el-col",{attrs:{span:8}},[t("el-radio",{attrs:{label:"2"},model:{value:e.userType,callback:function(t){e.userType=t},expression:"userType"}},[e._v("学生")])],1),t("el-col",{attrs:{span:8}},[t("el-radio",{attrs:{label:"3"},model:{value:e.userType,callback:function(t){e.userType=t},expression:"userType"}},[e._v("教师")])],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12,offset:9}},[t("el-button",{attrs:{type:"primary"},on:{click:e.loginFn}},[e._v("登录")])],1)],1)],1)])],1)],1)},r=[],o=(s(7658),s(2801),s(5701)),i={data(){return{username:"",password:"",userType:0,verifiCode:"",imgCodeUrl:""}},mounted(){this.getCodeImg()},methods:{loginFn(){(0,o.Z)({url:"/system/login",data:{username:this.username,password:this.password,userType:this.userType,verifiCode:this.verifiCode},method:"post"}).then((e=>{if(200===e.data.code){this.$store.commit("set_token",e.data.data.token);const t=this.$store.getters.get_token;(0,o.Z)({url:"/system/getInfo",headers:{token:t},method:"get"}).then((e=>{if(200===e.data.code){const t=e.data.data.userType;1===t?(console.log(e.data.data.user),this.$store.commit("store_info",e.data.data.user),this.$router.push({path:"/admin"})):2===t?this.$router.push({path:"/student"}):3===t&&this.$router.push({path:"/teacher"})}}))}}))},getCodeImg(){this.time=Date.parse(new Date),(0,o.Z)({url:"/system/getVerifiCodeImage",params:{t:this.time},method:"get",responseType:"arraybuffer"}).then((e=>"data:image/jpeg;base64,"+btoa(new Uint8Array(e.data).reduce(((e,t)=>e+String.fromCharCode(t)),"")))).then((e=>{this.imgCodeUrl=e}))}}},l=i,n=s(1001),u=(0,n.Z)(l,a,r,!1,null,"321f3fe6",null),d=u.exports}}]);
//# sourceMappingURL=777.089c6e22.js.map